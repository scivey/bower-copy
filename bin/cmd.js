#!/usr/bin/env node

// Generated by CoffeeScript 1.10.0
(function() {
  var ArgumentParser, _mainPath, copyComponents, options, parser, path, ref, resolveComponents;

  path = require("path");

  _mainPath = path.join(__dirname, "../index.js");

  ref = require(_mainPath), resolveComponents = ref.resolveComponents, copyComponents = ref.copyComponents;

  ArgumentParser = require("argparse").ArgumentParser;

  parser = new ArgumentParser({
    version: "0.0.3",
    addHelp: true,
    description: "Copy Bower components' main scripts to a target directory."
  });

  parser.addArgument(["-d", "--dest"], {
    type: "string",
    help: "The target directory."
  });

  parser.addArgument(["-s", "--src"], {
    type: "string",
    help: "The source directory.",
    "default": "./bower_components"
  });

  parser.addArgument(["-r", "--resolve"], {
    "default": false,
    action: "storeTrue",
    help: "If passed, the main script paths will be printed to STDOUT in JSON format.  No files will be copied."
  });

  options = parser.parseArgs();

  if (options.src == null) {
    options.src = "./bower_components";
  }

  if (options.resolve) {
    resolveComponents(options.src, function(err, components) {
      return console.log(components);
    });
  } else {
    if (options.dest == null) {
      throw new Error("No destination specified.");
    }
    copyComponents(options, function(err, copied) {
      return console.log("Success.");
    });
  }

}).call(this);
